after generating token, linux, source .env in base directory.


# 1. Login / get jwt auth code. POST request, no need for the $TOKEN var

echo "Your token: $TOKEN"

then run the curl commands using the $TOKEN variable.
which will at that point be in the source

first, go to your .env file and define the $TOKEN variable

try
echo $TOKEN

if you don't see the token,

then, in termial whilst in project base dir, run
source .env


try again
echo $TOKEN


you should see the token.


let's try out the endpoints

below is the curl commands


# 1. Get Drivers List (GET)

curl -X GET http://localhost:8080/drivers -H "Authorization: Bearer $TOKEN" | jq


# 2. Request Ride (POST)

# Request a ride from Kololo area (using coordinates from our seed data)
curl -X POST http://localhost:8080/request-ride -H "Content-Type: application/json" -H "Authorization: Bearer $TOKEN" -d '{"lat":0.3135,"lng":32.5805}' | jq


the above curl command just gave you json output that has a 'ride_id' in it
copy that 'ride_id' and use it below


# 3. Check Ride Status (GET)

# Use the ride_id from previous response
ride_id="8f1533c8-7c52-4897-b8bc-ac34d39b455c"
curl -X GET "http://localhost:8080/ride-status/$ride_id" -H "Authorization: Bearer $TOKEN" | jq

or 

curl -X GET "http://localhost:8080/ride-status/8f1533c8-7c52-4897-b8bc-ac34d39b455c" -H "Authorization: Bearer $TOKEN" | jq


# 4. Call logout:

curl -X POST http://localhost:8080/auth/logout -H "Authorization: Bearer $TOKEN"





curl -X POST http://localhost:8080/auth/logout -H "Authorization: Bearer $TOKEN"
how do we implement this? do we have to add some sort of a function inside some file?

































TESTING THE WEBSOCKET


open  another terminal.

Note that this will show notifications to the drivers who are available

forexample after querryign available drivers
and say driver2 is among,


request a ride from one of the terminals.

then, in a second terminal,

run this


docker-compose exec app /ws_test_client driver1
wont bring an notification.

docker-compose exec app /ws_test_client driver2
will pop a notification.







tried to run with docker and encountered an issue?

# Stop any running containers
docker-compose down

# Remove unused volumes
docker volume prune -f

# Rebuild with clean cache
docker-compose build --no-cache

# Start the services
docker-compose up

